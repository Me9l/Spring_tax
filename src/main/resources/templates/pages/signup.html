 <html layout:decorate="~{common/layout/defaultLayout}">
    <!-- s : main area -->
    <main layout:fragment="content">
      <div class="row justify-content-center">
      <div class="col-md-8 p-4 py-md-5 ">
	    <div class="text-center">
          <small class="fw-light">[ Sign Up ]</small>
          <h4 class="fw-bold">회원가입</h4>
        </div>
          <div class="rounded-4 shadow">
            <div class="p-3 pb-4">
              <h4 class="fw-bold mb-0 fs-2 text-center">TAX-SMITH</h4>
            </div>
            <div class="p-3 pt-0">
              <form class="" th:action="@{/user/signup}" method="POST" id="formWrap">
                <div class="col-md-10 form-floating mb-3 m-auto">
                <input type="text" class="form-control rounded-3" id="floatingId" placeholder="Name">
                <label for="floatingId">아이디 *</label>
                </div>
                <div class="col-md-10 form-floating mb-3 m-auto">
                <input type="text" class="form-control rounded-3" id="floatingPw1" placeholder="Name">
                <label for="floatingPw1">비밀번호 *</label>
                </div>
                <div class="col-md-10 form-floating mb-3 m-auto">
                <input type="text" class="form-control rounded-3" id="floatingPw2" placeholder="Name">
                <label for="floatingPw2">비밀번호 확인 *</label>
                </div>
                <div class="col-md-10 form-floating mb-3 m-auto">
                <input type="text" class="form-control rounded-3" id="floatingName" placeholder="Name">
                <label for="floatingName">이름 (본명) *</label>
                </div>
                <div class="col-md-10 form-floating mb-3 m-auto">
                  <input type="email" class="form-control rounded-3" id="floatingEmail" placeholder="email@example.com">
                  <label for="floatingEmail">이메일 주소 *</label>
                </div>
                <div class="col-md-10 form-floating mb-3 m-auto">
                  <input type="text" class="form-control rounded-3" id="floatingTel" placeholder="Mobile number">
                  <label for="floatingTel">휴대전화번호 *</label>
                </div>
                <div class="col-md-10 form-floating mb-3 m-auto">
                    <select class="form-select" id="floatingSelect" aria-label="Floating label select">
                      <option selected>선택안함</option>
                      <option value="1">세금환급</option>
                      <option value="2">기장/신고 대리</option>
                      <option value="3">컨설팅</option>
                      <option value="4">기타</option>
                    </select>
                    <label for="floatingSelect">가입 목적 (선택)</label>
                  </div>
                <hr class="my-3">
                <div class="col-md-10 form-check mb-3 m-auto">
                  <input class="form-check-input" type="checkbox" value="" id="turmsOfUse">
                  <label class="form-check-label" for="turmsOfUse">
                    [필수] 서비스이용약관에 동의합니다.
                  </label>
                </div>
                <div class="col-md-10 form-check mb-3 m-auto">
                  <input class="form-check-input" type="checkbox" value="" id="privacy">
                  <label class="form-check-label" for="privacy">
                    [필수] 개인정보 수집 및 이용에 동의합니다.
                  </label>
                </div>
                <div class="col-md-10 form-check mb-3 m-auto">
                  <input class="form-check-input" type="checkbox" value="" id="marketing">
                  <label class="form-check-label" for="marketing">
                    [선택] 마케팅 정보 수신에 동의합니다.
                  </label>
                </div>
                <div class="col-md-10 form-check mb-3 m-auto">
                  <input class="form-check-input" type="checkbox" value="" id="agreeAll">
                  <label class="form-check-label" for="agreeAll">
                    모두 동의합니다.
                  </label>
                </div>
                <div class="d-flex justify-content-center">
                    <button class="w-75 mb-2 btn btn-lg rounded-3 btn-primary submit" type="submit" disabled>회원 가입</button>
                </div>
              </form>
            </div>
          </div>
      </div>
      </div>
      
<script>
// S : Agreements

const form = document.getElementById('formWrap');
const checkAll = document.getElementById('agreeAll');
const checkBox = document.querySelectorAll('.form-check-input');
const submitButton = document.querySelector('.submit');

const agreements = {
  turmsOfUse : false,
  privacy : false,
  marketing : false,
};

form.addEventListener('submit',(e)=>e.preventDefault());

checkBox.forEach((item)=>item.addEventListener('input',toggleCheckBox));

function toggleCheckBox(e) {
  const { checked, id } = e.target;
  agreements[id] = checked;
  this.parentNode.classList.toggle('active');
  checkAllStatus();
  toggleSubmitButton();
}

function checkAllStatus() {
  const { turmsOfUse, privacy, marketing }  = agreements;
  if (turmsOfUse && privacy && marketing) {
    checkAll.checked = true;
  } else {
    checkAll.checked = false;
  }
}

function toggleSubmitButton() {
  const { turmsOfUse, privacy } = agreements;

  if(turmsOfUse && privacy) {
    submitButton.disabled = false;
  } else {
    submitButton.disabled = true;
  }
}

checkAll.addEventListener('click', (e)=> {
  const { checked } = e.target;
  if (checked) {
    checkBox.forEach((item) => {
      item.checked = true;
      agreements[item.id] = true;
      item.parentNode.classList.add('active');
    });
  } else {
    checkBox.forEach((item)=>{
      item.checked = false;
      agreements[item.id] = false;
      item.parentNode.classList.remove('active');
    });
  }
  toggleSubmitButton();
});


// E : Agreements
</script>

    </main>
    <!-- e: main area -->
</html>